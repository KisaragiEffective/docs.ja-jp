---
title: デスクトップ用 .NET の新機能
description: .NET の概要、.NET と .NET Framework の違い、および追加された新機能について説明します。
ms.date: 12/29/2020
ms.openlocfilehash: 03dea849ad8a797b917dca953d93be6878d7ec72
ms.sourcegitcommit: 05d0087dfca85aac9ca2960f86c5efd218bf833f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/30/2021
ms.locfileid: "102106182"
---
# <a name="whats-new-with-net-for-desktop"></a>デスクトップ用 .NET の新機能

.NET Core 3.0 以降、.NET では Windows フォームと WPF がサポートされています。 そのため、現在はデスクトップ アプリケーション用に .NET Framework と .NET のどちらかを選択できるようになりました。 この章では、.NET とは何か、およびそのデスクトップ アプリケーションに対する利点について説明します。

## <a name="the-motivation-behind-net-core"></a>.NET Core の背後にある意図

2002 年のリリース以来、.NET Framework は年々進化を続け、Windows フォーム、ASP.NET、Entity Framework、Windows ストアなどの多くのテクノロジをサポートしてきました。 それらはすべて、本来は異なるものです。 そのため、Microsoft では、.NET Framework の一部を取り、テクノロジごとに異なるアプリケーション スタックを作成することによって、この進化に取り組んできました。 そうすることで、特定のスタックのニーズに合わせて開発機能をカスタマイズし、すべてのプラットフォームの可能性を最大限に活用することができました。 これは、さまざまな独立のチームによって管理される .NET Framework の各バージョンの断片化につながります。 これらのスタックすべてには、アプリ モデル、フレームワーク、およびランタイムを含む共通の構造がありますが、これらの各部分の実装は異なります。

これらのプラットフォームのいずれかのみを対象としている場合は、このモデルを使用できます。 ただし、多くの場合、同じソリューションで複数のターゲット プラットフォームが必要になることがあります。 たとえば、お客様のアプリケーションには、デスクトップ管理者の部分、サーバー上で実行されているバックエンド ロジックを共有する顧客向けの Web サイト、さらにモバイル クライアントがある場合があります。 この場合は、このような .NET バーティカルすべてにまたがることができる統一されたコーディング エクスペリエンスが必要です。

Windows 8 がリリースされた時点で、ポータブル クラス ライブラリ (PCL) の概念は誕生していました。 当初、.NET Framework は、常に 1 つのユニットとして配置されるという前提に基づいて設計されていたため、[ファクタリング](https://wikipedia.org/wiki/Decomposition_(computer_science))が問題になることはありませんでした。 複数のバーティカル間でのコード共有の問題に対処する場合、その原動力は、フレームワークのリファクタリング方法にありました。 コントラクトという考えは、十分に要素に分割された API アクセス領域を提供することです。 コントラクトはコンパイル対象であるアセンブリにすぎず、それらの間の依存関係を考慮して、適切なファクタリングを念頭に置いて設計されています。

これにより、複数のバーティカル間の API の違いを、以前にあった個々の API レベルとは対照的に、アセンブリ レベルで判断できるようになります。 この側面によって、複数のバーティカルを対象とすることができるクラス ライブラリ エクスペリエンスが可能になりました (ポータブル クラス ライブラリとも呼ばれます)。

![.NET Framework のリリース履歴](./media/whats-new-dotnet-core/release-history.png)

PCL では、開発のエクスペリエンスが、API のシェイプに基づいてバーティカル全体で統合されます。 また、異なるバーティカルで実行されるライブラリを作成するという最も差し迫ったニーズも対応されます。 しかし、そこには大きな課題があります。API が移植可能なのは、すべてのバーティカルにわたり、実装が前に移動する場合のみです。

より優れたアプローチは、十分に要素に分割されたビューではなく、十分に要素に分割された実装を提供することによって、バーティカル全体で実装を統合することです。 特定のコンポーネントを所有する各チームに対して、各自の API がすべてのバーティカルにわたってどのように動作するか考えるように要求する方が、一貫性のある API スタックを以前にさかのぼって提供するよりも、はるかにシンプルです。 ここで、.NET Standard が登場します。 詳細については、次のセクションを参照してください。

もう 1 つの大きな課題は、.NET Framework の配置方法と関係があります。 .NET Framework は、コンピューター全体のフレームワークです。 これに加えられた変更は、依存関係を持つすべてのアプリケーションに影響します。 この配置モデルには、ディスク領域の削減やサービスへの一元的なアクセスなど、多くの利点がありますが、いくつかの落とし穴があります。

まず、アプリケーション開発者が最近リリースされたフレームワークに依存することが難しくなります。 最新の OS に依存するか、アプリケーションと共に .NET Framework をインストールするアプリケーション インストーラーを提供する必要があります。 Web 開発者の場合は、IT 部門がサーバーでサポートされているバージョンを確立するときに、このオプションを使用することもできない場合があります。

.NET Framework セットアップでチェーンのためのインストーラーを提供する手間を惜しまないとしても、.NET Framework のアップグレードによって他のアプリケーションが壊れる可能性があります。

旧バージョンと互換性のあるフレームワークのバージョンを提供する努力にもかかわらず、互換性のある変更によってアプリケーションが壊れる可能性があります。 たとえば、既存の型にインターフェイスを追加すると、その型のシリアル化方法が変更され、既存のコードによっては破壊的な問題の原因となることがあります。 .NET Framework のインストールされているベースは非常に大きいため、このような破壊的なシナリオに対処することにより、.NET Framework 内のイノベーションのペースが遅くなります。

これらすべての問題を解決するために、Microsoft では .NET プラットフォームの進化へのアプローチとして、.NET Core が開発されました。

## <a name="introduction-to-net-core"></a>.NET Core の概要

.NET Core は、Microsoft の .NET テクノロジを、モジュール化された、クロスプラットフォームの、オープンソースの、クラウド対応プラットフォームに進化させるものです。 Windows、macOS、Linux 上で実行され、Android や IoT などの ARM ベースのアーキテクチャでも実行できるようになる予定です。

.NET Core の目的は、Windows、クロスプラットフォーム、モバイル アプリケーションなど、あらゆる種類のアプリケーション用に統合されたプラットフォームを提供することです。 [.NET Standard](../../standard/net-standard.md) では、すべてのアプリケーション モデルに必要な共有ベース API を提供し、アプリケーション モデル固有の API を除外することによって、これを実現します。

このフレームワークにより、効率とパフォーマンスの面でアプリケーションに多くの利点がもたらされ、サポートされているさまざまなプラットフォームでのパッケージ化と配置が簡略化されます。

.NET Core の利点は、次の 3 つの特性に由来します。

- **クロスプラットフォーム:** これにより、さまざまなプラットフォーム (Windows、macOS、Linux) でのアプリケーションの実行が可能になります。
- **オープンソース:** .NET Core プラットフォームはオープンソースで、GitHub を通じて入手でき、透明性とコミュニティによる投稿が促進されます。
- **サポート対象:** Microsoft では .NET Core が正式にサポートされています。

.NET Core 3.0 以降では、Web とクラウドの既存のサポートだけでなく、デスクトップ、IoT、AI ドメインのサポートも用意されています。 このフレームワークの目標は、現在および将来のあらゆる種類の .NET 開発を対象とする、という印象的なものです。 Microsoft では、2020 年末の .NET 5 でこのビジョンを完了することが計画されています。 .NET の世界における一意性を高めるために、"Core" という名前が削除されました。

## <a name="net-5-is-net-core-vnext"></a>.NET 5 は .NET Core vNext

.NET 5 は、.NET Core の次の段階です。 .NET 5.0 では、次のいくつかの主要な方法で .NET を改善することを目的としています。

- 共通のランタイム動作と開発者エクスペリエンスを備えた、あらゆる場所で使用できる 1 つの .NET ランタイムとフレームワークを生成します。
- .Net Core、.NET Framework、Xamarin、Mono を最大限に活用して .NET の機能を拡張します。
- 開発者 (Microsoft とコミュニティ) が連携して取り組んで拡張し、すべてのシナリオを向上させることができる単一のコードベースから製品を構築します。

この新しいリリースと方向は、.NET にとって画期的です。 .NET 5 を使用すると、構築するアプリの種類に関係なく、コードおよびプロジェクト ファイルの外観が同じになります。 各アプリで同じランタイム、API、および言語の機能にアクセスできます。 これには、ほとんど毎日ランタイムにコミットされる、新しい[パフォーマンスの改善](https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-5/)が含まれます。 詳細については、「[.NET 5 の新機能](../../core/dotnet-five.md)」を参照してください。

![.NET 5 のすべてのドメイン](./media/whats-new-dotnet-core/all-domains-of-dotnet5.png)

## <a name="net-framework-vs-net-5"></a>.NET Framework と .NET 5

.NET の関連性については理解しましたが、.NET Framework はどうなるのかと疑問に思うかもしれません。 次のような疑問が浮かぶかもしれません: それを破棄する必要があるのでしょうか。 消される予定なのでしょうか。 .NET Framework 上のアプリケーションを最新化するには、どのような選択肢があるでしょうか。

2019 年に、最後のバージョンの **.NET Framework - 4.8** がリリースされました。 デスクトップ アプリケーションについては、次の 3 つの主な機能強化が含まれていました。

- **最新のブラウザーとメディア コントロール**: 現在、.NET デスクトップ アプリケーションでは、Internet Explorer と Windows Media Player を使用して HTML の表示とメディア ファイルの再生が実行されます。 これらのレガシ コントロールでは最新の HTML が表示されず、また最新のメディア ファイルが再生されないため、最新の標準をサポートする Microsoft Edge と新しいメディア プレーヤーを利用した新しいコントロールが追加されました。
- **UWP コントロールへのアクセス**: UWP には、最新の Windows 機能とタッチ ディスプレイを利用する新しいコントロールが含まれています。 これらの新しい機能やコントロールを使用するためにアプリケーションを書き直す必要はありません。そのため、既存の WPF または Windows フォームのコードでこれらの新機能を使用できます。
- **高 DPI の機能強化**: ディスプレイの解像度は、4K や 8K の解像度へと増加しています。 そのため、.NET Framework 4.8 では新しい HDPI の機能強化が追加され、既存の Windows フォームおよび WPF アプリケーションがこれらの新しいディスプレイ上で最適に表示されるようになりました。

.NET Framework は何百万台ものコンピューターにインストールされているため、Microsoft によるサポートは引き続き提供されますが、新機能は追加されません。

.NET 5 は、オープンソースで、クロスプラットフォームの、高速なバージョンの .NET ファミリです。 サイドバイサイドの性質が備わっているため、アプリケーションを破損することなく変更を行うことができます。 つまり、.NET には時間の経過に伴い、.NET Framework には追加されない新しい API と言語機能が追加されます。 また、 **.NET** には、.NET Framework では不可能だった次のような機能が既に備わっています。

- **Windows フォームと WPF をサポートする .NET のサイドバイサイド バージョン**: コンピューターのフレームワーク バージョンを更新するときの副作用に関する問題が解決されます。 複数のバージョンの .NET を同じコンピューター上にインストールできます。各アプリケーションによって、使用する .NET のバージョンが指定されます。 さらに、.NET 上で Windows フォームと WPF の開発と実行を行うことができるようになりました。
- **アプリケーションに .NET を直接埋め込む**: アプリケーション パッケージの一部として .NET を配置できます。 これにより、コンピューターに特定のバージョンがインストールされるのを待つことなく、最新のバージョン、機能、および API を利用できます。
- **.NET の機能を活用する**: .NET Core は、.NET の高速かつオープンソースのバージョンです。 そのサイドバイサイドの性質により、互換性を損なうリスクを伴わずに、新しい革新的な API や基底クラス ライブラリ (BCL) の機能強化を迅速に導入できます。 Windows フォームと WPF アプリケーションで、最新の .NET 機能を利用できるようになりました。これには、実行時のパフォーマンスや高 DPI のサポートなど、より基本的な修正も含まれています。

Microsoft のロードマップにおける不可欠の部分は、開発者がアプリケーションを .NET Core に、その後は .NET 5 に、容易に移行できるようにすることでした。 しかし、既存の .NET Framework アプリケーションがある場合、.NET 5 に移行しなくてはというプレッシャーを感じる必要はありません。 .NET Framework は今後も完全にサポートされ、常に Windows の一部であり続けます。 ただし、最新の言語機能と API を今後使用する必要がある場合は、アプリケーションを .NET に移行する必要があります。

お客様の新しいデスクトップ アプリケーションについては、.NET 5 で直接始めることをお勧めします。 軽量かつクロスプラットフォームであり、サイドバイサイドで実行され、ハイ パフォーマンスを備え、コンテナーやマイクロサービス アーキテクチャに完全に適合しています。

![最新の .NET Framework バージョンを使用して .NET Framework アプリケーションを更新したり、アプリケーションを .NET Core に移植したりすることができます](./media/whats-new-dotnet-core/framework-vs-core.png)

## <a name="net-standard-vs-pcl"></a>.NET Standard と PCL

[.NET Standard](../../standard/net-standard.md) は、すべての .NET 実装で使用できるようにすることを目的とした .NET API の正式な仕様です。 .NET Standard の背後にある意図は、.NET エコシステムの高度な統一性を確立することです。 .NET Standard は、コードのコンパイル対象である統一されたコントラクトのセットを構成する .NET API の仕様です。 これらのコントラクトは各 .NET フレーバーに実装されるため、さまざまな .NET 実装間にわたる移植性を実現できます。

.NET Standard により、次の主なシナリオが可能になります。

- ワークロードに関係なく、すべての .NET 実装用に統一された基底クラス ライブラリ API のセットを定義し、実装する。
- 開発者が、この同じ API のセットを使用して、.NET 実装間で使用可能なポータブル ライブラリを生成できるようにする。

.NET Standard は PCL の進化であり、次の一覧は .NET Standard と PCL の基本的な違いを示しています。

- .NET Standard は、Microsoft によって選択された、キュレート済み API のセットです。 PCL はそうではありません。
- PCL に含まれる API は、作成時にターゲットとして選択したプラットフォームに依存します。 そのため、PCL は選択した特定のターゲットに対してのみ共有可能になります。
- .NET Standard はプラットフォームに依存しません。Windows、macOS、Linux など、どこでも実行できます。
- PCL もクロスプラットフォームで実行できますが、その範囲はより限定されています。 PCL では、限定されたプラットフォームのセットのみをターゲットにできます。

## <a name="new-desktop-features-in-net-core"></a>.NET Core の新しいデスクトップ機能

### <a name="support-for-windows-forms-and-wpf"></a>Windows フォームと WPF のサポート

Windows フォームと WPF は、バージョン 3.0 以降、.NET Core に含まれています。 どちらのプレゼンテーション フレームワークも Windows 専用であり、クロスプラットフォームではありません。 WPF は DirectX 上のリッチなレイヤーと考えることができ、Windows フォームは GDI+ 上のより薄いレイヤーと考えることができます。 WPF と Windows フォームによって、Windows のデスクトップ アプリケーション機能の多くを公開して実行するという大きな仕事が行われます。 そのため、Windows フォームと WPF は .NET Core および .NET Framework で使用可能です。 これで、.NET Core をターゲットとする新しいデスクトップ アプリケーションを開始したり、既存のアプリケーションを .NET Framework から .NET Core に移行したりすることができます。

新しいバージョンの .NET Standard バージョン 2.1 は、.NET Core 3.0 と同時にリリースされました。 予想どおり、.NET Core 3.x バージョンでは .NET Standard 2.1 以前のバージョンがサポートされています。

また、.NET Core の Windows フォームと WPF の実装は、どちらもオープンソースであることに注意することが重要です。

### <a name="xaml-islands"></a>XAML Islands

[XAML Islands](/windows/apps/desktop/modernize/xaml-islands) は、開発者が最新の WPF、Windows フォーム、およびネイティブ Win32 アプリ (MFC など) で新しい Windows 10 コントロール (UWP XAML コントロール) を使用するためのコンポーネントのセットです。 UWP XAML コントロールの "島" を、Win32 アプリ内の任意の場所に配置できます。

これらの XAML Islands が可能になるのは、Windows 10 バージョン 1903 において、Win32 ウィンドウでウィンドウ ハンドラー (HWnd) を使用して UWP XAML コンテンツをホストできるようにする、一連の API が導入されているためです。 Windows 10 1903 以降で実行されているアプリのみが XAML Islands を使用できることに注意してください。

Windows フォームと WPF の開発者が XAML Islands を作成しやすくするために、Windows Community Toolkit では、一連の .NET ラッパーがいくつかの NuGet パッケージで導入されています。 これらのラッパーは、ラップされたコントロールとホスト コントロールです。

- [WebView](/windows/communitytoolkit/controls/wpf-winforms/webview)、[WebViewCompatible](/windows/communitytoolkit/controls/wpf-winforms/webviewcompatible)、[InkCanvas](/windows/communitytoolkit/controls/wpf-winforms/inkcanvas)、[MediaPlayerElement](/windows/communitytoolkit/controls/wpf-winforms/mediaplayerelement)、および [MapControl](/windows/communitytoolkit/controls/wpf-winforms/mapcontrol) というラップされたコントロールでは、いくつかの UWP XAML コントロールが Windows フォームまたは WPF コントロールにラップされ、それらの開発者の UWP の概念が隠されます。
- Windows フォームと WPF の [WindowsXamlHost](/windows/communitytoolkit/controls/wpf-winforms/windowsxamlhost) コントロールを使用すると、ラップされていない他の UWP XAML コントロールとカスタム コントロールを XAML Island に読み込むことができます。

### <a name="access-to-all-windows-10-apis"></a>すべての Windows 10 API へのアクセス

Windows 10 には、開発者が使用できる大量の API が用意されています。 これらの API によって、認証、Bluetooth、予定、連絡先などのさまざまな機能へのアクセスが提供されます。 これらの API は .NET Core を通じて公開されるようになり、Windows 開発者に、Windows 10 に存在する機能を活用した強力なデスクトップ アプリを作成する機会が提供されます。

### <a name="side-by-side-support-and-self-contained-exes"></a>サイドバイサイド サポートと自己完結型 EXE

.NET Core の配置モデルは、Windows デスクトップ開発者が .NET Core で経験する最大の利点の 1 つです。 .NET Core をグローバルにインストールする機能により、.NET Framework の一元的なインストールおよびサービス提供とほぼ同じ利点が提供されますが、インプレース更新は必要ありません。

新しい .NET Core バージョンがリリースされたときは、他のアプリケーションへの影響を気にすることなく、必要に応じてコンピューター上の各アプリを更新できます。 新しい .NET Core バージョンは独自のディレクトリにインストールされ、相互に "サイドバイサイド" で存在します。

分離を使用して配置する必要がある場合は、アプリケーションと共に .NET Core を配置できます。 .NET Core によって、アプリが .NET Core ランタイムと 1 つの実行可能ファイルとしてバンドルされます。

このような配置オプションは長い間開発者から求められていましたが、.NET Framework を使用して実現するのは困難でした。 .NET Core で使用されるモジュール型のアーキテクチャにより、これらの柔軟な配置オプションが可能になります。

### <a name="performance"></a>パフォーマンス

スタート時点から、Web とクラウドのワークロードを対象とし、.NET Core の DNA にはパフォーマンスが組み込まれていました。 サーバー側コードは、高いコンカレンシーのシナリオを実現するのに十分なパフォーマンスを備えている必要があります。現在、.NET Core は、市場で最もパフォーマンスの優れた Web プラットフォームとして成功しています。

.NET Core を使用して次世代のデスクトップ アプリケーションを構築する際は、このようなパフォーマンス上の機能強化を利用できます。

## <a name="benefits-of-open-source"></a>オープンソースの利点

.NET Core がオープンソースであることについて少し説明します。 クロスプラットフォームのスタックを構築する作業は複雑であり、ターゲットとなる各プラットフォームに特化した複数のチームの対話を必要とします。 この作業には、Microsoft 内外からの多くのコラボレーションが必要になります。 オープンソースにすること、したがって一般のコラボレーションを許可することによって、究極のアジャイル開発スタイルが実現され、品質レベルが向上します。大規模でアクティブな開発者コミュニティによって問題が検出されるためです。

これは .NET Core の主要な成功要因であり、前述したロードマップを高速化し続けます。すなわち、すべての開発者があらゆるアプリケーションを構築するために必要とする、唯一の .NET プラットフォームになることです。

>[!div class="step-by-step"]
>[前へ](why-modern-applications.md)
>[次へ](migrate-modern-applications.md)
