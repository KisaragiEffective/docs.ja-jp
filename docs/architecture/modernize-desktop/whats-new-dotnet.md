---
title: デスクトップ用 .NET の新機能
description: .NET、.NET と .NET Framework の違い、および追加された新機能について説明します。
ms.date: 12/29/2020
ms.openlocfilehash: 03dea849ad8a797b917dca953d93be6878d7ec72
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/04/2021
ms.locfileid: "102106182"
---
# <a name="whats-new-with-net-for-desktop"></a>デスクトップ用 .NET の新機能

.Net Core 3.0 以降、.NET では Windows フォームと WPF がサポートされています。 これで、デスクトップアプリケーション用に .NET Framework と .NET のどちらかを選択できるようになりました。 この章では、.NET とは何か、およびデスクトップアプリケーションの利点について説明します。

## <a name="the-motivation-behind-net-core"></a>.NET Core の背後にある動機

2002での起動以降、.NET Framework は、Windows フォーム、ASP.NET、Entity Framework、Windows ストアなどの多くのテクノロジをサポートするために年々進化してきました。 これらはすべて、本質的に異なります。 そのため、Microsoft は、.NET Framework の一部を取得し、各テクノロジ用に異なるアプリケーションスタックを作成することによって、この進化に近づいてきました。 そうすることで、特定のスタックのニーズに合わせて開発機能をカスタマイズし、すべてのプラットフォームの可能性を最大限に活用することができます。 これにより、さまざまな独立したチームによって管理される .NET Framework のバージョンの断片化が発生します。 これらのスタックには、アプリモデル、フレームワーク、およびランタイムを含む共通の構造がありますが、これらの各部分の実装は異なります。

これらのプラットフォームのいずれかのみを対象としている場合は、このモデルを使用できます。 ただし、多くの場合、同じソリューションに複数のターゲットプラットフォームが必要になることがあります。 たとえば、アプリケーションには、サーバー上で実行されているバックエンドロジックを共有する、顧客向けの web サイトであるデスクトップ管理者の部分と、モバイルクライアントがある場合があります。 この場合は、すべての .NET 業界にまたがることができる統一されたコーディングエクスペリエンスが必要です。

Windows 8 がリリースされた時点で、ポータブルクラスライブラリ (Pcl) の概念が生まれました。 当初、.NET Framework は、常に1つの単位として配置されるという前提に基づいて設計されていたため、 [ファクタリング](https://wikipedia.org/wiki/Decomposition_(computer_science)) が問題になることはありませんでした。 複数の業界間でのコード共有の問題に直面するため、運転力はフレームワークのリファクタリング方法に関するものでした。 コントラクトの概念は、十分に考慮された API のセキュリティ領域を提供することです。 コントラクトは、コンパイルする単純なアセンブリであり、それらの間の依存関係を考慮して適切なファクタリングを考慮して設計されています。

これにより、以前に行った個々の API レベルではなく、アセンブリレベルでの各業種の API の違いについての考え方がわかります。 この側面では、複数の業種 (ポータブルクラスライブラリとも呼ばれます) を対象とするクラスライブラリのエクスペリエンスが有効になりました。

![.NET Framework のリリース履歴](./media/whats-new-dotnet-core/release-history.png)

PCL では、開発のエクスペリエンスは、API 図形に基づいて複数の業界で統合されています。 また、さまざまな業種で実行されているライブラリを作成する必要がある場合もあります。 しかし、優れた課題があります。 Api は、実装がすべての業界で前進する場合にのみ移植できます。

より優れたアプローチは、十分に考慮されたビューではなく、明確な実装を提供することで、複数の環境に実装を統合することです。 特定のコンポーネントを所有する各チームに対して、一貫性のある API スタックをさかのぼってさかのぼって提供するよりも、Api がどのように機能するかについて考えてみることは、はるかに簡単です。 ここで .NET Standard があります。 詳細については、次のセクションを参照してください。

もう1つの大きな課題として、.NET Framework のデプロイ方法を使用する必要があります。 .NET Framework は、マシン全体のフレームワークです。 これに加えられた変更は、依存関係を持つすべてのアプリケーションに影響します。 このデプロイモデルには、ディスク領域の削減やサービスへの集中アクセスなど、多くの利点がありますが、いくつかの落とし穴があります。

まず、アプリケーション開発者が最近リリースされたフレームワークへの依存関係を取得することは困難です。 また、最新の OS に依存するか、アプリケーションと共に .NET Framework をインストールするアプリケーションインストーラーを提供する必要があります。 Web 開発者は、IT 部門がサーバーでサポートされているバージョンを確立するときに、このオプションを使用することもできない場合があります。

.NET Framework セットアップでのチェーンのためのインストーラーの提供に問題がある場合でも、.NET Framework をアップグレードすると他のアプリケーションが壊れる可能性があることがわかります。

旧バージョンと互換性のあるフレームワークのバージョンを提供することにもかかわらず、互換性に影響する変更によってアプリケーションが中断される可能性があります。 たとえば、既存の型にインターフェイスを追加すると、この型のシリアル化方法が変更され、既存のコードに応じて問題が発生します。 .NET Framework がインストールされているベースは非常に大きいため、このような状況に対抗することで、.NET Framework 内のイノベーションのペースが遅くなります。

これらのすべての問題を解決するために、Microsoft は .net Core を開発し、.NET プラットフォームの進化にアプローチしました。

## <a name="introduction-to-net-core"></a>.NET Core の概要

.NET Core は、Microsoft の .NET テクノロジを、モジュール型、クロスプラットフォーム、オープンソース、クラウド対応のプラットフォームに進化させるものです。 Windows、macOS、Linux で実行され、Android や IoT などの ARM ベースのアーキテクチャでも実行できます。

.NET Core の目的は、Windows、クロスプラットフォーム、モバイルアプリケーションなど、あらゆる種類のアプリケーションに統合されたプラットフォームを提供することです。 [.NET Standard](../../standard/net-standard.md) は、すべてのアプリケーションモデルに必要な共有基本 api を提供し、アプリケーションモデル固有の api を除外することによってこれを実現します。

このフレームワークにより、アプリケーションは効率とパフォーマンスの面で多くのメリットを提供し、さまざまなサポートされているプラットフォームでのパッケージ化とデプロイを簡略化します。

.NET Core の利点は、次の3つの特性に由来します。

- **クロスプラットフォーム:** これにより、さまざまなプラットフォーム (Windows、macOS、Linux) でのアプリケーションの実行が可能になります。
- **オープンソース:** .net Core プラットフォームはオープンソースであり、GitHub、促進透明性、コミュニティ投稿を通じて入手できます。
- **サポートされている:** Microsoft は、.NET Core を正式にサポートしています。

.NET Core 3.0 以降では、web とクラウドの既存のサポートだけでなく、デスクトップ、IoT、AI ドメインもサポートされています。 このフレームワークの目標は、現在および将来のあらゆる種類の .NET 開発を対象とすることです。 Microsoft は、2020の終わりに .NET 5 でこのビジョンを完了することを計画しています。 .NET 環境での一意性を高めるために、"Core" という名前が削除されました。

## <a name="net-5-is-net-core-vnext"></a>.Net 5 は .NET Core vNext

.Net Core の次のステップは .NET 5 です。 .NET 5.0 は、いくつかの重要な方法で .NET を改善することを目的としています。

- 共通のランタイム動作と開発者エクスペリエンスを備えた、あらゆる場所で使用できる 1 つの .NET ランタイムとフレームワークを生成します。
- .Net Core、.NET Framework、Xamarin、Mono を最大限に活用して .NET の機能を拡張します。
- 開発者 (Microsoft とコミュニティ) が連携して取り組んで拡張し、すべてのシナリオを向上させることができる単一のコードベースから製品を構築します。

この新しいリリースと方向は、.NET 用のゲームチェンジャーです。 .NET 5 では、作成しているアプリの種類に関係なく、コードとプロジェクトファイルは同じように見えます。 各アプリで同じランタイム、Api、言語の機能にアクセスできます。 これには、実質的に毎日実行される、新しい [パフォーマンスの改善](https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-5/) が含まれます。 詳細については、「 [.net 5 の新機能」](../../core/dotnet-five.md)を参照してください。

![.NET 5 のすべてのドメイン](./media/whats-new-dotnet-core/all-domains-of-dotnet5.png)

## <a name="net-framework-vs-net-5"></a>.NET Framework と .NET 5

.NET の関連性を理解したところで、.NET Framework で何が起こるか疑問に思うかもしれません。 次のような質問をすることができます。破棄する必要がありますか。 非表示になりますか。 .NET Framework にあるアプリケーションの最新化にはどのような選択肢がありますか。

2019では、 **.NET Framework-4.8** の最後のバージョンがリリースされました。 デスクトップアプリケーションには、次の3つの主な機能強化が含まれていました。

- **最新のブラウザーとメディアコントロール**: 現在、.net デスクトップアプリケーションは、Internet Explorer と Windows Media Player を使用して、HTML を表示し、メディアファイルを再生します。 これらのレガシコントロールは最新の HTML を表示せず、最新のメディアファイルを再生しないため、最新の標準をサポートする Microsoft Edge と新しいメディアプレーヤーを利用する新しいコントロールが追加されました。
- **Uwp コントロールへのアクセス**: uwp には、最新の Windows 機能とタッチディスプレイを利用する新しいコントロールが含まれています。 これらの新しい機能やコントロールを使用するようにアプリケーションを書き換える必要はありません。そのため、既存の WPF または Windows フォームコードでこれらの新機能を使用できます。
- **高 DPI 向上**: 表示の解像度が4K と8k の解像度に増加しています。 そのため、.NET Framework 4.8 では新しい HDPI の機能強化が追加され、既存の Windows フォームと WPF アプリケーションがこれらの新しいディスプレイで最適に見えるようになりました。

.NET Framework は何百万ものコンピューターにインストールされるため、Microsoft では引き続きサポートされますが、新機能は追加されません。

.NET 5 は、オープンソース、クロスプラットフォーム、および高速移動バージョンの .NET ファミリです。 このようにサイドバイサイドの性質があるため、アプリケーションを中断することなく変更を行うことができます。 つまり、.NET では、新しい Api と言語機能が .NET Framework には追加されません。 また、 **.net** には、次のような .NET Framework には使用できない機能が既にあります。

- **.Net をサポートする Windows フォームと WPF のサイドバイサイドバージョン**: コンピューターのフレームワークバージョンを更新するときの副作用の問題を解決します。 複数のバージョンの .NET を同じコンピューターにインストールできます。各アプリケーションは、使用する .NET のバージョンを指定します。 さらに、.NET 上で Windows フォームと WPF を開発して実行できるようになりました。
- **アプリケーションに .net を直接埋め込む**: アプリケーションパッケージの一部として .net をデプロイできます。 これにより、コンピューターに特定のバージョンがインストールされるのを待たずに、最新のバージョン、機能、および Api を利用できます。
- .Net の **機能を活用** します。 .net Core は、.net の高速移動のオープンソースバージョンです。 このようにサイドバイサイドでは、互換性を損なうことなく、革新的な新しい Api と基本クラスライブラリ (BCL) の機能強化を迅速に導入できます。 Windows フォームと WPF アプリケーションで最新の .NET 機能を利用できるようになりました。これには、実行時のパフォーマンス、高 DPI のサポートなどの基本的な修正も含まれています。

Microsoft のロードマップの重要な部分は、開発者がアプリケーションを .NET Core に移行し、後から .NET 5 に移行することを容易にすることでした。 ただし、既存の .NET Framework アプリケーションを使用している場合は、.NET 5 に移行することを押さえる圧力気にしないでください。 .NET Framework は完全にサポートされ、常に Windows の一部になります。 ただし、将来、最新の言語機能と Api を使用する場合は、アプリケーションを .NET に移行する必要があります。

新しいデスクトップアプリケーションについては、.NET 5 で直接始めることをお勧めします。 軽量でクロスプラットフォームで、並列実行され、パフォーマンスが高く、コンテナーとマイクロサービスアーキテクチャに完全に適合しています。

![最新の .NET Framework バージョンを使用して .NET Framework アプリケーションを更新したり、アプリケーションを .NET Core に移植したりすることができます。](./media/whats-new-dotnet-core/framework-vs-core.png)

## <a name="net-standard-vs-pcl"></a>.NET Standard と PCL

[.NET Standard](../../standard/net-standard.md) は、すべての .NET 実装で使用できるようにすることを目的とした .NET API の正式な仕様です。 .NET Standard の背後にある意図は、.NET エコシステムの高度な統一性を確立することです。 .NET Standard は、コードをコンパイルするための共通のコントラクトセットを構成する .NET Api の仕様です。 これらのコントラクトは各 .NET フレーバーに実装されるため、さまざまな .NET 実装間で移植性を実現できます。

.NET Standard により、次の主なシナリオが可能になります。

- ワークロードに関係なく、実装するすべての .NET 実装の基本クラスライブラリ Api の統一されたセットを定義します。
- 開発者が、この同じ API のセットを使用して、.NET 実装間で使用可能なポータブル ライブラリを生成できるようにする。

.NET Standard は Pcl の進化であり、次の一覧は .NET Standard と Pcl の基本的な違いを示しています。

- .NET Standard は、Microsoft によって選択された curated Api のセットです。 PCLs ではありません。
- PCL に含まれる Api は、作成時にターゲットとして選択したプラットフォームによって異なります。 これにより、選択した特定のターゲットに対してのみ、PCL が共有可能になります。
- .NET Standard はプラットフォームに依存しません。 Windows、macOS、Linux などでどこでも実行できます。
- また、PCLs ではクロスプラットフォームを実行できますが、限定されています。 PCLs は、限定された一連のプラットフォームのみを対象にできます。

## <a name="new-desktop-features-in-net-core"></a>.NET Core の新しいデスクトップ機能

### <a name="support-for-windows-forms-and-wpf"></a>Windows フォームと WPF のサポート

Windows フォームと WPF は、バージョン3.0 以降、.NET Core に含まれています。 どちらのプレゼンテーションフレームワークも Windows 向けであり、クロスプラットフォームではありません。 WPF は、DirectX の豊富なレイヤーとして考えることができ、GDI + 上の薄型レイヤーとして Windows フォームます。 WPF と Windows フォームは、Windows のデスクトップアプリケーション機能の多くを公開して実行するという大きな仕事を行います。 .NET Core および .NET Framework では Windows フォームと WPF を使用できます。 これで、.NET Core を対象とする新しいデスクトップアプリケーションを起動して、既存のアプリケーションを .NET Framework から .NET Core に移行できるようになりました。

新しいバージョンの .NET Standard バージョン2.1 は、.NET Core 3.0 と同時にリリースされました。 必要に応じて、.NET Core 3.x のバージョンでは .NET Standard 2.1 以前のバージョンがサポートされています。

また、.NET Core の Windows フォームと WPF の実装はどちらもオープンソースであることに注意することが重要です。

### <a name="xaml-islands"></a>XAML Islands

[XAML アイランド](/windows/apps/desktop/modernize/xaml-islands) は、開発者が現在の WPF、Windows フォーム、およびネイティブの Win32 アプリ (MFC など) で新しい Windows 10 コントロール (UWP XAML コントロール) を使用するための一連のコンポーネントです。 UWP XAML コントロールは、Win32 アプリ内で任意の場所に配置できます。

Windows 10 バージョン1903では、windows ハンドラー (Hwnd) を使用して Win32 ウィンドウで UWP XAML コンテンツをホストできる一連の Api が導入されているため、これらの XAML アイランドが可能です。 Windows 10 1903 以降で実行されているアプリのみが XAML アイランドを使用できることに注意してください。

Windows フォームと WPF 開発者向けに XAML アイランドを簡単に作成できるように、Windows Community Toolkit には、いくつかの NuGet パッケージに一連の .NET ラッパーが導入されています。 これらのラッパーは、ラップされたコントロールとホストコントロールです。

- [WebView](/windows/communitytoolkit/controls/wpf-winforms/webview)、 [webviewcompatible](/windows/communitytoolkit/controls/wpf-winforms/webviewcompatible)、 [System.windows.controls.inkcanvas>](/windows/communitytoolkit/controls/wpf-winforms/inkcanvas)、 [MediaPlayerElement](/windows/communitytoolkit/controls/wpf-winforms/mediaplayerelement)、および[mapcontrol](/windows/communitytoolkit/controls/wpf-winforms/mapcontrol)のラップされたコントロールは、いくつかの uwp XAML コントロールを Windows フォームまたは WPF コントロールにラップし、これらの開発者の uwp の概念を非表示にします。
- Windows フォームと WPF の [Windowsxamlhost](/windows/communitytoolkit/controls/wpf-winforms/windowsxamlhost) コントロールを使用すると、ラップされていない他の UWP xaml コントロールとカスタムコントロールを xaml アイランドに読み込むことができます。

### <a name="access-to-all-windows-10-apis"></a>すべての Windows 10 Api へのアクセス

Windows 10 には、開発者が使用できる優れた API が用意されています。 これらの Api は、認証、Bluetooth、予定、連絡先などのさまざまな機能へのアクセスを提供します。 これらの Api は .NET Core を通じて公開されるようになり、windows 開発者は Windows 10 に存在する機能を活用して強力なデスクトップアプリを作成できるようになりました。

### <a name="side-by-side-support-and-self-contained-exes"></a>サイドバイサイドサポートと自己完結型 Exe

.NET Core デプロイモデルは、Windows デスクトップ開発者が .NET Core で経験する最大の利点の1つです。 .NET Core をグローバルにインストールする機能により、.NET Framework の中央のインストールとサービスの利点の多くが提供されますが、インプレース更新は必要ありません。

新しい .NET Core バージョンがリリースされると、他のアプリケーションに影響を与えることなく、必要に応じてコンピューター上の各アプリを更新できます。 新しい .NET Core バージョンは、独自のディレクトリにインストールされ、相互に "サイドバイサイド" で存在します。

分離を使用してデプロイする必要がある場合は、アプリケーションと共に .NET Core をデプロイできます。 .NET Core は、アプリケーションを1つの実行可能ファイルとして .NET Core ランタイムにバンドルします。

これらの配置オプションは、開発者が非常に長い時間を必要としていましたが、.NET Framework を使用するのは困難でした。 .NET Core で使用されるモジュラーアーキテクチャにより、これらの柔軟なデプロイオプションが可能になります。

### <a name="performance"></a>パフォーマンス

Web ワークロードとクラウドワークロードを対象とした開始から、.NET Core は、その DNA に接続されています。 現在、サーバー側コードは、高い同時実行のシナリオと .NET Core のスコアを市場で最高のパフォーマンス web プラットフォームとして実現するのに十分なパフォーマンスを備えている必要があります。

.NET Core を使用して次世代のデスクトップアプリケーションを構築すると、これらのパフォーマンス向上を利用できます。

## <a name="benefits-of-open-source"></a>オープンソースの利点

.NET Core がオープンソースであることについて少し説明します。 クロスプラットフォームのスタックを構築することは、対象となる各プラットフォームに特化したチームとの対話を必要とする複雑な作業です。 この作業には、マイクロソフト内外からの多くのコラボレーションが必要です。 オープンソースにしてパブリックコラボレーションを開始することで、究極のアジャイル開発スタイルが適用されます。これにより、大規模でアクティブな開発者コミュニティによって問題が検出されたため、品質レベルが向上します。

これは、前述したロードマップの速度を向上させる .NET Core の主要な成功要因です。開発者がアプリケーションを構築する必要がある唯一の .NET プラットフォームになります。

>[!div class="step-by-step"]
>[前へ](why-modern-applications.md)
>[次へ](migrate-modern-applications.md)
