---
title: ファイアウォール手順
description: WCF サンプルのファイアウォールでポートまたはプログラムを有効にする方法について説明します。 要件とセキュリティ環境に応じて、次のいずれかの手順を使用します。
ms.date: 03/30/2017
ms.assetid: a7dc429f-65ac-4faf-974a-77d5fb977fe1
ms.openlocfilehash: de55d067960b8f2096c129f6feaf037219e06a96
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/23/2020
ms.locfileid: "85246142"
---
# <a name="firewall-instructions"></a>ファイアウォールに関する手順

Windows Communication Foundation (WCF) サンプルが機能できるように、ファイアウォールで複数のポートまたはプログラムを有効にする必要があります。 サンプルの多くは、通信する際に 8000 ～ 8003 の範囲のポートと 9000 のポートを使用します。 既定ではファイアウォールが有効なので、こうしたポートにはアクセスできません。 サンプル用にファイアウォールを有効にするには、要件とセキュリティ環境に応じて次のいずれかの手順を完了する必要があります。

- オプション 1: 実行中のサンプルを対話形式で有効にします。 ファイアウォールの構成をあらかじめ変更することなく、サンプルのビルドおよび実行の開始に進みます。 サンプルが実行されると、 **[Windows セキュリティの重要な警告]** ダイアログ ボックスが表示されます。 対象のプログラムを、ブロック解除の一覧に対話形式で追加できます。 この手順では、この後サンプルを再起動する必要があります。

- オプション 2: サンプル プログラムをあらかじめ有効にしておきます。 **Windows ファイアウォール コントロール パネル** アプレットを開始し、実行するサンプル プログラムを有効にします。 実行可能ファイルが存在するように、プログラムを最初にビルドする必要があります。 手順の詳細については、後述を参照してください。

- オプション 3: ポート範囲をあらかじめ有効にしておきます。 **Windows ファイアウォール コントロール パネル** アプレットを開始し、サンプルで使用するポート 80、443、8000 から 8003、および 9000 を有効にします。 手順の詳細については、後述を参照してください。 このオプションは他の手順よりも安全性が低くなります。サンプルだけでなく、任意のプログラムでこれらのポートを使用できるようになるからです。

どの手順を使用するか判断に迷う場合は、最初のオプションを選択してください。 他のベンダのファイアウォールを実行している場合も、同様の変更が必要になる場合があります。

> [!IMPORTANT]
> ファイアウォールの構成を変更すると、セキュリティに影響します。 変更内容は記録し、サンプルの使用が終わったらそれらの変更点を削除することをお勧めします。

## <a name="enable-samples-programs-in-advance"></a>サンプル プログラムをあらかじめ有効にする

1. サンプルをビルドします。

2. **[スタート]**  >  **[ファイル名を指定して実行]** を選択して、「`firewall.cpl`」と入力します。 これにより、**Windows ファイアウォール コントロール パネル** アプレットが開きます。

    > [!NOTE]
    > Windows ファイアウォールを介して通信する機能が必要なサンプルを実行するには、ファイアウォール設定を変更するための権限が必要です。 一部のファイウォール設定を変更できず、コンピューターがドメインに接続される場合は、システム管理者がグループ ポリシーを使用してファイアウォール設定を管理している可能性があります。

3. プログラムが Windows ファイアウォールを通過するのを許可するには、オペレーティング システムに固有の次のいずれかの手順を実行します。

    - Windows 7 または Windows Server 2008 R2 の場合は、 **[Windows ファイアウォールを介したプログラムまたは機能を許可する]** をクリックします。 **[設定の変更]**  >  **[別のプログラムの許可]** をクリックします。

    - Windows Vista または Windows Server 2008 の場合は、 **[Windows ファイアウォールによるプログラムの許可]** をクリックします。

4. **[例外]** タブで、 **[プログラムの追加]** をクリックします。

5. **[参照]** ボタンをクリックして、実行するサンプルの実行可能ファイルを選択します。

6. ステップ 4 と 5 を繰り返して、実行するすべてのサンプルの実行可能ファイルを追加します。

7. **[OK]** をクリックして、ファイアウォール アプレットを閉じます。

## <a name="enable-a-port-range-in-advance"></a>ポート範囲をあらかじめ有効にする

1. **[スタート]**  >  **[ファイル名を指定して実行]** を選択して、「`firewall.cpl`」と入力します。 これにより、**Windows ファイアウォール コントロール パネル** アプレットが開きます。

2. Windows 7 または Windows Server 2008 R2 の場合は、次の手順を実行します。

    1. [Windows ファイアウォール] ウィンドウの左の列で、 **[詳細設定]** をクリックします。

    2. 左の列で、 **[受信の規則]** をクリックします。

    3. 右の列で、 **[新しい規則]** をクリックします。

    4. **[ポート]** を選択して **[次へ]** をクリックします。

    5. **[TCP]** を選択し、 **[特定のローカル ポート]** フィールドに「`8000, 8001, 8002, 8003, 9000, 80, 443`」と入力します。

    6. **[次へ]** をクリックします。

    7. **[接続を許可する]** を選択して、 **[次へ]** をクリックします。

    8. **[ドメイン]** と **[プライベート]** を選択して、 **[次へ]** をクリックします。

    9. この規則に `WCF-WF 4.0 Samples` という名前を指定し、 **[完了]** をクリックします。

    10. **[送信の規則]** をクリックし、ステップ c から h を繰り返します。

3. Windows Vista または Windows Server 2008 の場合は、次の手順を実行します。

    1. **[Windows ファイアウォールによるプログラムの許可]** をクリックします。

    2. **[例外]** タブで、 **[ポートの追加]** をクリックします。

    3. ポートの名前とポート番号 8000 を入力して、 **[TCP]** オプションを選択します。

    4. **[スコープの変更]** をクリックして **[ユーザーのネットワーク (サブネット) のみ]** オプションを選択し、 **[OK]** をクリックします。

    5. 手順 b ～ d を繰り返して、ポート 8001、8002、8003、9000、80、および 443 を設定します。

4. **[OK]** をクリックして、ファイアウォール アプレットを閉じます。

> [!NOTE]
> サンプルの実行が終わったら、ファイアウォールのすべての例外を削除します。 これを行うには、**Windows ファイアウォール コントロール パネル** アプレットを開き、前の手順で追加したすべてのプログラムまたはポートのエントリを削除します。
