---
title: WCF サービス発行
description: WCF サービス発行は、テスト目的でアプリケーションを運用環境に展開するのに役立ちます。
ms.date: 03/30/2017
ms.assetid: c806b253-cd47-4b96-b831-e73cbf08808f
ms.openlocfilehash: ac817dac15deaf35fdb8e078094dd4b9dca97d06
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/26/2020
ms.locfileid: "96293488"
---
# <a name="wcf-service-publishing"></a>WCF サービス発行

Windows Communication Foundation (WCF) サービス発行は、WCF サービス ホストと WCF テスト クライアントで構成される初期の開発環境から進めて、テストの目的でアプリケーションを実際に運用環境に展開する場合に役立ちます。 最終的な展開プランをコミットする前に、Windows Communication Foundation (WCF) サービス発行を使用して、WCF サービスが正しく動作し、発行の準備ができていることを確認できます。 また、テスト用のさまざまなターゲットの場所に WCF サービス ライブラリを展開することもできます。

## <a name="supported-services-and-target-locations"></a>サポートされているサービスとターゲットの場所

WCF サービス発行では、一連の WCF サービス ライブラリ テンプレートと、それらに対応する項目テンプレートから作成された、WCF サービスの発行がサポートされています。これには以下が含まれます。

- WCF サービス ライブラリ テンプレートと項目テンプレート。

- 配信サービス ライブラリ

これらのサービス テンプレートを見つけるには、 **[ファイル]**  >  **[新しいプロジェクト]** > **[Visual Basic]** または **[Visual C#]** > **[WCF]** を選択します。 この場所 (WCF ワークフロー サービス アプリケーションや WCF サービス アプリケーションなど) のその他の WCF テンプレートについては、[Web アプリケーションのワンクリック発行](/previous-versions/aspnet/dd465337(v=vs.110))を使用して発行できます。

サービスは、次のターゲットの場所に発行できます。

- ローカル IIS

- ファイル システム。

- FTP サイト

## <a name="using-wcf-service-publishing"></a>WCF サービス発行の使用

サービス実装を配置するには、次の手順を実行します。

1. 昇格された特権で Visual Studio を開きます (実行可能ファイルを右クリックし、 **[管理者として実行]** を選択して開きます)。  IIS 7.0 以降を使用している場合は、コントロール パネルの [Windows の機能の有効化または無効化] を使用して、"IIS メタベースおよび IIS6 構成との互換性" コンポーネントがインストールされていることを確認します。

2. サービス プロジェクトを開き、メイン メニューから **[ビルド]**  >  **[\<Project Name> の発行]** を選択するか、**ソリューション エクスプローラー** でプロジェクトを右クリックし、 **[発行]** をクリックします。

3. **[発行]** ウィンドウが表示されます。 **[…]** をクリックして、 サービスの配置先にするターゲットの場所を指定します。 アプリケーションの展開先には、ローカル IIS、ファイル システム、または FTP サイトを指定できます。 ローカルの IIS にアプリケーションを展開する場合、使用している Web サイトを選択し、右上の **[新しい Web アプリケーションの作成]** アイコンをクリックして、その下に Web アプリケーションを作成できます。

4. メイン ウィンドウの **[発行]** をクリックすると、指定したターゲットの場所にアプリケーションが展開され、Web.config、.svc、およびアセンブリ ファイルがターゲット ディレクトリにコピーされます。 . .svc ファイルの名前は、"ProjectName.ServiceName.svc" になります。 サービスが正常に発行されると、Visual Studio の [出力] ウィンドウに、[`http://localhost/WebApplicationFolderName...` に接続しています] などのホットリンクが表示されます。 Ctrl キーを押しながらリンクをクリックすると、Visual Studio の内側にブラウザー ページが開き、サービス ディレクトリ構造が表示されます。

     サイトを参照できない場合、IIS でディレクトリ ブラウザーが有効になっていない可能性があります。 [対処方法] のセクションのヒントに従って有効にしてください。 代わりに、「`http://localhost/WebApplicationFolderName/ProjectName.ServiceName.svc`」と直接入力してサービス ページを表示することもできます。

**[発行]** を使用すると、プロジェクトで定義されているすべてのサービスのアセンブリ、構成、および .svc ファイルをターゲットの場所にコピーするかどうか、およびコピー先にある既存のファイルを上書きするかどうかを指定できます。

ローカルの IIS にアプリケーションを配置すると、IIS セットアップに関連するエラーが発生することがあります。 IIS が正しくインストールされていることを確認してください。 ブラウザーのアドレス バーに「`http://localhost`」と入力し、IIS の既定のページが表示されるかどうかを確認します。 ASP.NET または WCF が IIS に適切に登録されていないために問題が発生する場合もあります。 Visual Studio の開発者コマンド プロンプトを開き、`aspnet_regiis.exe -ir` コマンドを実行して ASP.NET 登録に関する問題を解決したり、`ServiceModelReg.exe –ia` コマンドを実行して WCF の登録に関する問題を解決したりすることができます。

## <a name="files-generated-for-publishing"></a>発行用に生成されるファイル

 WCF サービス ライブラリを Web でホストできるようになる前に、アセンブリ ファイル、Web.config ファイル、および .svc ファイルがツールによって生成されます。 生成されたファイルは、すべてターゲットの場所にコピーされます。 その後でサービスが発行されます。

### <a name="assembly-files"></a>アセンブリ ファイル

 このツールを使用して WCF サービスを発行すると、まずサービスが自動的にビルドされ、サービス プロジェクトでアセンブリ ファイルが生成されます。

### <a name="svc-file"></a>.SVC ファイル

 発行操作を行うと、*.svc ファイルが存在するかどうかにかかわらず、WCF サービスごとに *.svc ファイルが生成され、バージョンの有効性が確認されます。 svc ファイルには、WCF サービス ライブラリおよび配信サービス ライブラリ用と、シーケンシャルおよびステート マシン ワークフロー サービス ライブラリ用の 2 種類があります。 生成された \*.svc ファイルは、ターゲットの場所のルート フォルダーにコピーされます。

### <a name="webconfig-file"></a>Web.config ファイル

 サービス プロジェクトが特定のターゲットの場所に発行されるたびに、Web.config ファイルが作成されます。

 生成された Web.config ファイルには、Web ホストに役立つ Web セクションと、WCF サービス ライブラリの App.config の内容に次の変更を加えたものが含まれています。

- ベース アドレスが除外されています。

- ターゲット プラットフォームのトレース設定を保持するために、`<diagnostics>` 要素の設定が除外されています。

## <a name="publishing-wcf-services-with-non-http-bindings-to-iis"></a>IIS への非 HTTP バインドを使用した WCF サービスの公開

 IIS7.0 以降を使用している場合、非 HTTP バインドを使用した WCF サービスを IIS に発行することができます。 事前の構成を行う必要があります。 詳細については、「[Windows プロセス アクティブ化サービスでのホスティング](./feature-details/hosting-in-windows-process-activation-service.md)」のトピックを参照してください。

## <a name="security"></a>セキュリティ

 IIS は管理者アカウントで実行する必要があるため、ローカル IIS に発行するには、管理特権が必要です。 管理特権のないユーザーが WCF サービス発行を開いた場合、IIS はターゲットの場所として使用できません。 ファイル システムまたは FTP サイトへの発行は、管理特権がなくても行うことができます。

## <a name="see-also"></a>関連項目

- [WCF Visual Studio テンプレート](wcf-vs-templates.md)
- [WCF サービス ホスト (WcfSvcHost.exe)](wcf-service-host-wcfsvchost-exe.md)
- [WCF のテスト用クライアント (WcfTestClient.exe)](wcf-test-client-wcftestclient-exe.md)
