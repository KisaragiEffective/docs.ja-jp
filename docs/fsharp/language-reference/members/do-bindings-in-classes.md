---
title: クラス内の do 束縛
description: クラス定義の F# 'do' バインドを使用する方法について説明します。これにより、オブジェクトが構築されたとき、または型が最初に使用されたときにアクションが実行されます。
ms.date: 05/16/2016
ms.openlocfilehash: ced4f1bb17d9e23bf51cc79b5a275cc334cca013
ms.sourcegitcommit: f20dd18dbcf2275513281f5d9ad7ece6a62644b4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/30/2019
ms.locfileid: "68627580"
---
# <a name="do-bindings-in-classes"></a>クラス内の do 束縛

クラス定義の `do` バインドではオブジェクトが構築されたとき、静的 `do` バインドでは型が最初に使用されたときにアクションが実行されます。

## <a name="syntax"></a>構文

```fsharp
[static] do expression
```

## <a name="remarks"></a>解説

`do` バインドは、クラス定義の中で、`let` バインドと一緒かその後、ただしメンバー定義よりも前に現れます。 `do` キーワードは、モジュール レベルの `do` バインドに対しては省略可能ですが、クラス定義の `do` バインドでは省略可能ではありません。

所定の型の各オブジェクトを構築する際、非静的 `do` バインドと非静的 `let` バインドは、クラス定義に表示される順序で実行されます。 1 つの型で複数の `do` バインドを実行できます。 非静的 `let` バインドと非静的 `do` バインドは、プライマリ コンストラクターの本体になります。 非静的 `do` バインド セクションのコードは、プライマリ コンストラクターのパラメーターと、`let` バインド セクションで定義されている任意の値または関数を参照できます。

非静的 `do` バインドでは、クラスのメンバーにアクセスできます。ただし、そのクラスに、クラスの見出しで `as` キーワードによって定義されている自己識別子があり、かつそれらのメンバーの使用がすべて、そのクラスの自己識別子で修飾されている場合に限ります。

`let` バインドによってクラスのプライベート フィールドが初期化されるため (これは、メンバーが想定どおりに動作することを保証するためにしばしば必要となる)、通常は `do` バインドの後に `let` バインドが配置されます。これにより、`do` バインド内のコードが完全に初期化されたオブジェクトで実行できるようになります。 初期化が完了する前にコードによってメンバーの使用が試行されると、InvalidOperationException が発生します。

静的 `do` バインドでは、外部クラスの静的メンバーまたはフィールドを参照できますが、インスタンスのメンバーやフィールドを参照することはできません。 静的 `do` バインドはクラスの静的初期化子の一部となり、クラスが最初に使用される前に確実に実行されます。

型の `do` バインドでは、属性は無視されます。 `do` バインドで実行されるコードに属性が必要な場合は、プライマリ コンストラクターに適用する必要があります。

次のコードでは、クラスに静的 `do` バインドと非静的 `do` バインドがあります。 オブジェクトには、`a` と `b` という 2 つのパラメーターを持つコンストラクターがあり、2 つのプライベート フィールドがクラスの `let` バインドで定義されています。 2 つのプロパティも定義されています。 これらはすべては、それらの値をすべて出力する行で示されているように、非静的 `do` バインド セクションのスコープ内にあります。

[!code-fsharp[Main](~/samples/snippets/fsharp/lang-ref-1/snippet3101.fs)]

出力は次のとおりです。

```console
Initializing MyType.
Initializing object 1 2 2 4 8 16
```

## <a name="see-also"></a>関連項目

- [[メンバー]](index.md)
- [クラス](../classes.md)
- [コンストラクター](constructors.md)
- [クラス内の `let` バインド](let-bindings-in-classes.md)
- [`do` バインド](../functions/do-Bindings.md)
